(this["webpackJsonpjslib-compare"]=this["webpackJsonpjslib-compare"]||[]).push([[0],{154:function(e,t,n){e.exports=n(236)},159:function(e,t,n){},160:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),c=n.n(o),l=(n(159),n(239)),i=n(246),u=n(84),s=n(26),d=n(49),m=(n(160),n(85)),f=n(100),b=n(27),h=n(241),p=n(74),v=n(64),y=n(108),g=n.n(y),E=n(21),j=n.n(E),O=(new(n(149).a)({baseUrl:"https://api.github.com"}),n(134)),w=n(89),k=n.n(w),C=k.a.create({baseURL:"https://api.npmjs.org/"}),Y=function(e){return C.get(e)},M=function(e,t,n){var a="".concat(e,"/").concat(t),r=n?n.split(","):[],o=new Promise((function(e,t){Y(a).then((function(t){return e(t)})).catch((function(e){return t(e)}))})),c=r.map((function(t){return new Promise((function(n,a){C.get("".concat(e,"/").concat(t)).then((function(e){n(e)})).catch((function(e){404===e.response.status?n(null):(console.error(e),a(e))}))}))}));return new Promise((function(e,t){Promise.all([o].concat(Object(f.a)(c))).then((function(t){for(var n=Object(O.a)(t),a=n[0],o=n.slice(1),c=a,l=0;l<r.length;l++){var i=o[l];c.data[r[l]]=(null===i||void 0===i?void 0:i.data)||null}e(c.data)})).catch((function(e){console.error(e),t(e)}))}))},x=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r=n.filter((function(e){return e.startsWith("@")})).sort(),o=n.filter((function(e){return!e.startsWith("@")})).sort();return 1===o.length&&o.push("_placeholder_"),Object(d.b)(n.length>0?["/downloads/range/".concat(e),o.join(","),r.join(",")]:null,M)},D=n(43),S=n.n(D),R=n(61),z="".concat("https://plainapi.letjs.fun/","jslib-compare"),P=k.a.create({baseURL:z}),W=function(){var e=Object(R.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.get("/release",{params:{libs:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=n(244),A=n(247),N=n(238),I=n(240),U=function(e){var t=e.range,n=e.onRangeChange,a=e.timeType,o=e.onTimeTypeChange,c=e.excludeWeekends,l=e.onExcludeChange;return r.a.createElement("div",null,r.a.createElement(i.b,null,r.a.createElement(T.a.Group,{value:a,onChange:function(e){return o(e.target.value)}},r.a.createElement(T.a,{value:"weekly"},"weekly"),r.a.createElement(T.a,{value:"daily"},"daily")),r.a.createElement(A.a,{size:"small",checked:c,onChange:l,disabled:"weekly"===a}),r.a.createElement("span",null,"exclude weekends"),r.a.createElement(N.a,{type:"vertical",style:{height:"1.3em"}}),r.a.createElement(I.a.RangePicker,{ranges:{"last-week":function(){return[j()().subtract(1,"week"),j()().subtract(1,"day")]},"last-month":function(){return[j()().subtract(1,"month"),j()().subtract(1,"day")]},"last-year":function(){return[j()().subtract(1,"year"),j()().subtract(1,"day")]}},disabledDate:function(e){var t=j()();return t.subtract(1,"day").diff(e,"year")>=1||t.diff(e,"day")<=0},value:t,onChange:n,size:"small"})))},F=r.a.createContext([]),H=/^\?libs=(.+)$/,J=function(e){var t=e.children,n=Object(a.useState)([]),o=Object(b.a)(n,2),c=o[0],l=o[1],i=Object(s.g)().search;return Object(a.useEffect)((function(){var e=decodeURIComponent(i).match(H);l(e?e[1].split(","):[])}),[i]),r.a.createElement(F.Provider,{value:c},t)},L=function(){return Object(a.useContext)(F)},_=[j()().subtract(1,"year"),j()().subtract(1,"day")],B=_.map((function(e){return e.format("YYYY-MM-DD")})).join(":"),V=function(){var e=L(),t=Object(a.useState)(_),n=Object(b.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(B),i=Object(b.a)(l,2),u=i[0],s=i[1],d=Object(a.useState)("weekly"),y=Object(b.a)(d,2),E=y[0],O=y[1],w=Object(a.useState)(!0),k=Object(b.a)(w,2),C=k[0],Y=k[1],M=x.apply(void 0,[u||B].concat(Object(f.a)(e))),D=M.data,S=M.error,R=M.isValidating,z=Object(a.useMemo)((function(){return D?e.reduce((function(e,t){var n=D[t];return n?e.concat(n.downloads.map((function(e){return Object(m.a)({},e,{lib:t})}))):e}),[]):[]}),[D,e]),P=Object(a.useMemo)((function(){return z.filter((function(e){var t=e.day;return j()(t).isoWeekday()<6}))}),[z]),W=Object(a.useMemo)((function(){return D?e.reduceRight((function(e,t){for(var n,a=(null===(n=D[t])||void 0===n?void 0:n.downloads)||[],r=null,o={downloads:0,lib:t,day:""},c=a.length-1;c>=0;c--){var l=a[c],i=j()(l.day);r||(r=j()(l.day));var u=r.diff(i,"day");u<=6&&(o.downloads+=l.downloads),6===u&&(o.duration="".concat(i.format("YYYY-MM-DD")," to ").concat(r.format("YYYY-MM-DD")),o.day=r.format("YYYY-MM-DD"),e.unshift(o),r=null,o={day:"",downloads:0,lib:t})}return e}),[]):[]}),[D,e]);return r.a.createElement(h.a,{title:"NPM Downloads",extra:r.a.createElement(U,{range:o,onRangeChange:function(e,t){c(e),s(e?t.join(":"):"")},timeType:E,onTimeTypeChange:O,excludeWeekends:C,onExcludeChange:Y})},r.a.createElement(v.Chart,{padding:[10,50,50],height:300,autoFit:!0,data:"weekly"===E?W:C?P:z,scale:{downloads:{min:0}}},r.a.createElement(v.Axis,{name:"downloads",label:{formatter:function(e){return"".concat(g()(e).divide(1e3).value(),"K")}}}),r.a.createElement(v.LineAdvance,{shape:"smooth",area:!0,position:"day*downloads",color:"lib",tooltip:["lib*downloads*duration*day",function(e,t,n,a){return{name:e,value:g()(t).format("0,0"),title:n||a}}]}),D?null:r.a.createElement(p.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},description:S||R?"loading...":"No Data"})))},$=n(242),G=n(152),K=n(243),q=n(50),Q=n(245),X=function(){var e=Object(s.f)(),t=L(),n=Object(a.useState)(t),o=Object(b.a)(n,2),c=o[0],l=o[1],u=Object(a.useState)(""),d=Object(b.a)(u,2),m=d[0],f=d[1];Object(a.useEffect)((function(){l((function(e){return e.join(",")!==t.join(",")?t:e}))}),[t]);var h=Object(a.useCallback)((function(){m&&(l((function(e){return e.includes(m)?e:e.concat(m)})),f(""))}),[m]);return r.a.createElement($.a,{title:"JS Compare",backIcon:!1,extra:r.a.createElement("a",{href:"https://github.com/guofei0723/jslib-compare",style:{fontSize:"1.5em",color:"inherit"}},r.a.createElement(Q.a,null))},r.a.createElement(i.b,{direction:"vertical"},r.a.createElement("div",{style:{display:"inline-block"}},c.map((function(e){return r.a.createElement(G.a,{key:e,closable:!0,onClose:function(){return l(c.filter((function(t){return t!==e})))}},e)})),r.a.createElement(i.b,null,r.a.createElement(K.a,{size:"small",type:"text",value:m,onPressEnter:h,onChange:function(e){return f(e.target.value)},style:{width:"160px"},placeholder:"add js library",addonAfter:r.a.createElement(q.a,{type:"text",size:"small",onClick:h,disabled:!m,style:{height:22,border:0,padding:0}},"+")}),r.a.createElement(q.a,{size:"small",danger:!0,onClick:function(){return l([])},disabled:0===c.length},"clear"))),r.a.createElement(q.a,{type:"primary",onClick:function(){return e.push("/?libs=".concat(c.join(",")))},disabled:c===t||0===c.length},"Compare")))},Z=function(e){var t=e.children;return r.a.createElement(p.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},description:t})},ee=function(){var e=Object(a.useState)(!0),t=Object(b.a)(e,2),n=t[0],o=t[1],c=L(),l=function(e){var t=e.join(",");return Object(d.b)(e.length>0?[t,z]:null,W)}(c),u=l.data,s=l.error,m=l.isValidating,f=Object(a.useMemo)((function(){return u?c.reduce((function(e,t){var n=u[t];return n?e.concat(n.versions.map((function(e){var n=j()(e.published_at);return{version:e.number,name:t,date:n.format("YYYY-MM-DD"),year:n.format("YYYY"),month:"2020-".concat(n.format("MM-DD HH:mm:ss"))}}))):e}),[]).sort((function(e,t){return e.date>t.date?1:-1})):[]}),[u,c]),p=Object(a.useMemo)((function(){return f.filter((function(e){return!e.version.includes("-")}))}),[f]);return r.a.createElement(h.a,{title:"NPM Release",extra:r.a.createElement(i.b,null,r.a.createElement(A.a,{checked:n,onChange:o,size:"small"}),r.a.createElement("span",null,"Only Stable"))},r.a.createElement(v.Chart,{autoFit:!0,height:300,data:n?p:f,scale:{month:{type:"time",values:["2020-01-01","2021-01-01"],ticks:["2020-03-01","2020-06-01","2020-09-01","2020-12-01"],formatter:function(e){return j()(e).format("MMM")}},year:{type:"cat"}}},r.a.createElement(v.Interval,{adjust:[{type:"dodge",marginRatio:0}],color:"name",position:"year*month",shape:"tick",size:12,tooltip:["name*version*date",function(e,t,n){return{name:e,title:n,value:t}}]}),u?null:r.a.createElement(Z,null,s||m?"loading...":"No Data")))},te=l.a.Content;var ne=function(){return r.a.createElement(u.a,{basename:"/jslib-compare"},r.a.createElement("div",{className:"App"},r.a.createElement(l.a,{style:{minHeight:"100%"}},r.a.createElement(te,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/"},r.a.createElement(d.a,{value:{revalidateOnFocus:!1,shouldRetryOnError:!1}},r.a.createElement(J,null,r.a.createElement(X,null),r.a.createElement(i.b,{direction:"vertical",style:{display:"flex",padding:"0 24px"},size:"large"},r.a.createElement(V,null),r.a.createElement(ee,null))))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[154,1,2]]]);
//# sourceMappingURL=main.96538be4.chunk.js.map